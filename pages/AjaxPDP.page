<apex:page id="AjaxPDP" standardController="Contact" recordSetVar="contacts" lightningStylesheets="true" sideBar="false" showHeader="false" ContentType="text/csv">
    <apex:pageBlock title="Contacts">
        <apex:form >
            <apex:pageBlockTable value="{!contacts}" var="contactRecord">
                <apex:column >
                    <apex:facet name="header">Name</apex:facet>
                    <apex:outputPanel >
                        {!contactRecord.Name}
                    </apex:outputPanel>
                </apex:column>
                <apex:column >
                    <apex:facet name="header">Phone</apex:facet>
                    <apex:outputPanel >
                        {!contactRecord.Phone}
                    </apex:outputPanel>
                </apex:column>
                <apex:column >
                    <apex:facet name="header">Account Name (click to see detail)</apex:facet>
                    <apex:outputPanel >
                        <apex:actionSupport event="onclick" rerender="detail">
                            <apex:param name="accountId" value="{!contactRecord.AccountId}"/>
                        </apex:actionSupport>
                        {!contactRecord.Account.Name}
                    </apex:outputPanel>
                </apex:column>
            </apex:pageBlockTable>
        </apex:form>
    </apex:pageBlock>
    <apex:outputPanel id="detail">
        <apex:actionStatus >
            <apex:facet name="stop">
                <apex:detail subject="{!$CurrentPage.parameters.accountId}" relatedList="false" title="false"/>
            </apex:facet>
        </apex:actionStatus>
    </apex:outputPanel>
</apex:page>